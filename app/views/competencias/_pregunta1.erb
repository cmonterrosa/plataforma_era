<tr>
  <td align="justify">
    <label class="uper">1.- ¿Cuántos docentes se han capacitado en el último ciclo escolar? en materia de: <em class="formee-req"> *</em></label>
  </td>
</tr>
<tr>
  <td align="left" style="vertical-align:middle;" >
    <div class="grid-1-12"></div>
    <div class="grid-2-12"><label class="uperSub">SALUD: </label><%= f.text_field :dctes_cap_salud, :style => "text-align: center;", :onkeyup => "showImageDctesAlumn('docentes', 'dcapacitadora', 'eje1_p1');" %></div>
    <div class="grid-2-12"><label class="uperSub">AMBIENTE: </label><%= f.text_field :dctes_cap_ma, :style => "text-align: center;", :onkeyup => "showImageDctesAlumn('docentes', 'dcapacitadora', 'eje1_p1');" %></div>
    <div class="grid-2-12"><label class="uperSub">AMBOS: </label><%= f.text_field :dctes_cap_ambos, :style => "text-align: center;", :onkeyup => "showImageDctesAlumn('docentes', 'dcapacitadora', 'eje1_p1');" %></div>
    <div class="grid-1-12"></div>
    <div class="grid-3-12" style="text-align: justify;"><label class="uperSub">TOTAL&nbsp;CAPACITADOS: </label>
      <input id="total_docentes" name="total_docentes" type="text" style="border-width: 0; width: 55px; font-size: 15px; text-align: center; color: black; background-color: #e6f8e0;" onkeyup="showImageDctesAlumn('docentes', 'dcapacitadora', 'eje1_p1');" />
    </div>
    <div class="grid-12-12" id="dcapacitadora" style="display: none;">
      <label class="uper">¿QUE&nbsp;INSTITUCIONES&nbsp;O&nbsp;DEPENDENCIAS&nbsp;IMPARTIERON&nbsp;ESTAS&nbsp;CAPACITACIONES?</label>
      <fieldset style="padding: 5px 5px 5px 5px;">
        <div id="dcapacitadoras" class ="checkbox">
          <% @dcapacitadoras.each do |c| %>
            <% @valor = nil %>
            <% @competencia.docentes_capacitados.each do |x| %>
              <% if x[:dcapacitadora_id] == c.id %>
                <% @valor = x.numero  %>
                <% @desc_dep = x.descripcion_dep %>
              <% end %>
            <% end %>
            <%= check_box_tag "dcapacitadoras[#{c.id}]", c.clave, @s_dcapacitadoras.include?(c.id) ? true : false, :onclick => "checkBoxToSelct('dcapacitadora');" %>&nbsp;<%= c.descripcion %>
            &nbsp;NÚM.&nbsp;DE&nbsp;CAPACITACIONES:&nbsp;<%= select "dcapacitadora", "#{c.clave}", (1..9), {:selected => @valor}, {:style => "display: none; width:40px; font-size: 12px;"}%><br />
            <% if c.clave == "OTRA" %>&nbsp;DESCRIPCIÓN:&nbsp;<input name="dcapacitadoras<%= c.clave %>" id="dcapacitadoras<%= c.clave %>" size="35px" style="text-align:justify; display: none; text-transform: uppercase;" value="<%=h @desc_dep ? @desc_dep : "" %>" /><% end %>
            <%#= linea_horizontal %>
          <% end %>
        </div>
      </fieldset>
    </div>
    <div class="grid-12-12" id="eje1_p1" style="display: none; text-align: center;">
      <%=link_to image_tag("era/btns_cert/upload.png", :mouseover => "era/btns_cert/upload1.png", :border => 0, :name => "pregunta1", :id => "pregunta1"),
                          {:controller => "upload", :diagnostico => @diagnostico, :eje => 1, :numero_pregunta => 1, :action => "list_evidencias" },
                           :title => "EVIDENCIA DE LA PREGUNTA 1", :class => "fancybox fancybox.iframe"%>
    </div>
  </td>
</tr>

<script type="text/javascript">
  showImageDctesAlumn('docentes', 'dcapacitadora', 'eje1_p1');
  checkBoxToSelct('dcapacitadora');

  var total_docentes = new LiveValidation('total_docentes');
  total_docentes.add( Validate.Presence );
  total_docentes.add( Validate.Numericality, { maximum: parseInt(document.getElementById("val_max_doc").value), onlyInteger: true} );

  var dctes_cap_salud = new LiveValidation('competencia_dctes_cap_salud');
  dctes_cap_salud.add( Validate.Presence );
  dctes_cap_salud.add( Validate.Numericality, { onlyInteger: true } );

  var dctes_cap_ma = new LiveValidation('competencia_dctes_cap_ma');
  dctes_cap_ma.add( Validate.Presence );
  dctes_cap_ma.add( Validate.Numericality, { onlyInteger: true } );

  var dctes_cap_ambos = new LiveValidation('competencia_dctes_cap_ambos');
  dctes_cap_ambos.add( Validate.Presence );
  dctes_cap_ambos.add( Validate.Numericality, { onlyInteger: true } );

  jQuery(function(){
    jQuery("#dcapacitadoras").validate({ expression: "if (skipSelect2(SelfID, 'total_docentes')) return true; else return false;", message: "Seleccione una opción!" });
  });

  jQuery("#competencia_dctes_cap_salud").keyup(function() {
      dctes_aplican_conocimto.remove( Validate.Numericality, { maximum: parseInt(document.getElementById("total_docentes").value), onlyInteger: true } );
      dctes_aplican_conocimto.add( Validate.Numericality, { maximum: parseInt(document.getElementById("total_docentes").value), onlyInteger: true } );
  });
  jQuery("#competencia_dctes_cap_ma").keyup(function() {
      dctes_aplican_conocimto.remove( Validate.Numericality, { maximum: parseInt(document.getElementById("total_docentes").value), onlyInteger: true } );
      dctes_aplican_conocimto.add( Validate.Numericality, { maximum: parseInt(document.getElementById("total_docentes").value), onlyInteger: true } );
  });
  jQuery("#competencia_dctes_cap_ambos").keyup(function() {
      dctes_aplican_conocimto.remove( Validate.Numericality, { maximum: parseInt(document.getElementById("total_docentes").value), onlyInteger: true } );
      dctes_aplican_conocimto.add( Validate.Numericality, { maximum: parseInt(document.getElementById("total_docentes").value), onlyInteger: true } );
  });

</script>
