<div class="container">

  <div class="formee-msg-info">
    <h3>Información importante</h3>
    <ul>
      <li>Los campos marcados con <em class="formee-req">*</em> son obligatorios.</li>
    </ul>
  </div>

  <% form_for :escuela, @escuela, :url => { :action => "save", :id => @escuela, :clave => @escuela.clave }, :html => {:class => "formee", :name => "escuela"} do |f| -%>
  <fieldset>
    <legend>Registro&nbsp;de&nbsp;Escuelas</legend>

    <div id="prellenado" style="background:#ebf7aa;">
      <div class="grid-4-12">
        <label style=" font-weight: bold;">Clave:</label>
        <label style=" font-style: italic;"><%= @escuela.clave %></label>
      </div>
      <div class="grid-8-12">
        <label style=" font-weight: bold;">Nombre de la Escuela:</label>
        <label style=" font-style: italic;"><%= @escuela.nombre %></label>
      </div>

      <div class="grid-4-12">
        <label style=" font-weight: bold;">Zona Escolar:</label>
        <label style=" font-style: italic;"><%= @escuela.zona_escolar %></label>
      </div>
      <div class="grid-4-12">
        <label style=" font-weight: bold;">Sector:</label>
        <label style=" font-style: italic;"><%= @escuela.sector %></label>
      </div>
      <div class="grid-4-12">
        <label style=" font-weight: bold;">Turno:</label>
        <label style=" font-style: italic;"><%= @escuela.turno %></label>
      </div>
      
      <div class="grid-4-12">
        <label style=" font-weight: bold;">Nivel:</label>
        <label style=" font-style: italic;"><%= @escuela.nivel_descripcion %></label>
      </div>
      <div class="grid-8-12">
        <label style=" font-weight: bold;">Modalidad:</label>
        <label style=" font-style: italic;"><%= @escuela.modalidad %></label>
      </div>

      <div class="grid-8-12">
        <label style=" font-weight: bold;">Domicilio:</label>
        <label style=" font-style: italic;"><%= @escuela.domicilio %></label>
      </div>
      <div class="grid-4-12">
        <label style=" font-weight: bold;">Telefono:</label>
        <label style=" font-style: italic;"><%= @escuela.telefono %></label>
      </div>

      <div class="grid-8-12">
        <label style=" font-weight: bold;">Localidad:</label>
        <label style=" font-style: italic;"><%= @escuela.localidad %></label>
      </div>
      <div class="grid-4-12">
        <label style=" font-weight: bold;">Municipio:</label>
        <label style=" font-style: italic;"><%= @escuela.municipio %></label>
      </div>
    </div>
    
    <!-- categoria -->
    <div class="grid-6-12">
      <label>Categoría: <em class="formee-req">*</em></label>
      <%=f.select :categoria_escuela_id, CategoriaEscuela.all.collect {|p| [ p.descripcion, p.clave ] }, {:selected => @select_ce}, :onchange => "showDescription(this, 'escuela_categoria_desc');" %>
    </div>
    <div class="grid-6-12">
      <%=f.text_area :categoria_desc, :placeholder => "Especifique...", :disabled => 'disabled', :style => "display: none;" %>
    </div>

    <div class="grid-12-12 clear"></div>
    
    <!-- programa -->
    <div class="grid-6-12">
      <label>La institución educativa participa en algún programa: ¿Cúal? <em class="formee-req">*</em></label>
      <div style="overflow:auto; width:370px;">
        <select id="programas" name="programas[]" style="width:auto;" multiple="multiple" size="5" onchange="showDescription(this, 'escuela_programa_desc');">
          <%= options_from_collection_for_select(Programa.find(:all), :clave, :descripcion, @s_programas)%>
        </select>
      </div>
    </div>
       <%#= f.select :programa_id, Programa.find(:all).collect {|p| [ p.descripcion, p.clave ] }, {:selected => @select_p}, :onchange => "showDescription(this,'escuela_programa_desc');" %>
    <div class="grid-6-12" >
      <img src="/images/era/space.png" alt="" width="10" height="40" />
      <%= f.text_area :programa_desc, :placeholder => "Especifique...", :disabled => 'disabled', :style => "display: none;" %>
    </div>

    <!-- director -->
    <div class="grid-12-12">
      <label>Nombre del director: <em class="formee-req">*</em></label>
      <%= f.text_field  :nombre_director%>
    </div>

    <div class="grid-6-12">
      <label>Teléfono del director (lada): </label>
      <%= f.text_field :telefono_director%>
    </div>

    <div class="grid-6-12">
      <label>Correo electrónico de la escuela: <em class="formee-req">*</em></label>
      <%= f.text_field :email%>
    </div>

    <!-- nombre del proyecto -->
    <%#*<div class="grid-12-12">%>
      <%#*<label>Nombre del proyecto: <em class="formee-req">*</em></label>%>
      <%#= f.text_field :nombre_proyecto %>
    <%#*</div>%>

    <!-- responsables -->
    <div class="grid-12-12">
      <label>Nombre del responsable del proyecto: <em class="formee-req">*</em></label>
      <%= f.text_field :responsables_proyecto %>
    </div>

    <!-- telefono y correo electronico de responsables -->
    <div class="grid-6-12">
      <label>Teléfono (lada): </label>
      <%= f.text_field :tel_responsable_proyecto%>
    </div>

    <div class="grid-6-12">
      <label>Correo electrónico (proyecto): <em class="formee-req">*</em></label>
      <%= f.text_field :email_responsable_proyecto%>
    </div>

    <!-- total de personal -->
    <div class="grid-3-12">
      <label>Total personal docente: <em class="formee-req">*</em></label>
      <%@td = @escuela.doc_hom.to_i + @escuela.doc_muj.to_i%>
      <%= f.text_field :total_personal_docente, :value => @td %>
    </div>
    
    <div class="grid-3-12">
      <label>Total de alumnos: <em class="formee-req">*</em></label><br />
        <div class="grid-5-12">
        <label>Mujeres: </label>
        <%#= f.text_field :total_personal_alumn_m %>
        <%= f.text_field :alu_muj %>
        </div>
      <div class="grid-2-12"></div>
        <div class="grid-5-12">
        <label>Hombres: </label>
        <%#= f.text_field :total_personal_alumn_h %>
        <%= f.text_field :alu_hom %>
        </div>
    </div>

    <div class="grid-3-12">
      <label>Total personal admvo: <em class="formee-req">*</em></label>
      <%= f.text_field :total_personal_admvo %>
    </div>

    <div class="grid-3-12">
      <label>Total personal de apoyo: <em class="formee-req">*</em></label>
      <%= f.text_field :total_personal_apoyo %>
    </div>
    
    <!-- submit -->
    <div class="grid-12-12">
      <input class="right" type="submit" onclick="to_uppercase();" title="GUARDAR REGISTRO Y GENERAR DOCUMENTOS" value="GUARDAR REGISTRO Y GENERAR DOCUMENTOS" />
    </div>

  </fieldset>
       
  <%end%>
</div>

<script type="text/javascript">
  showDescription('escuela_categoria_escuela_id','escuela_categoria_desc');
  showDescription('programas','escuela_programa_desc');

  var categoria_desc = new LiveValidation( 'escuela_categoria_desc', {onlyOnSubmit: true} );
  categoria_desc.add( Validate.Presence );
  var programa_desc = new LiveValidation( 'escuela_programa_desc', {onlyOnSubmit: true} );
  programa_desc.add( Validate.Presence );
  var nombre_director = new LiveValidation( 'escuela_nombre_director', {onlyOnSubmit: true} );
  nombre_director.add( Validate.Presence );
  <%#*var proyecto_nombre = new LiveValidation( 'escuela_nombre_proyecto', {onlyOnSubmit: true } );%>
  <%#*proyecto_nombre.add( Validate.Presence );%>
  var email = new LiveValidation( 'escuela_email' );
  email.add( Validate.Presence, {onlyOnSubmit: true } );
  email.add( Validate.Email );
  var tel_responsable_proyecto = new LiveValidation( 'escuela_tel_responsable_proyecto' );
  tel_responsable_proyecto.add( Validate.Numericality, {onlyInteger: true} );
  var email_responsable_proyecto = new LiveValidation( 'escuela_email_responsable_proyecto' );
  email_responsable_proyecto.add( Validate.Email );
  email_responsable_proyecto.add( Validate.Presence, {onlyOnSubmit: true } );
  var responsables_proyecto = new LiveValidation( 'escuela_responsables_proyecto', {onlyOnSubmit: true } );
  responsables_proyecto.add( Validate.Presence );
  var total_personal_docente = new LiveValidation( 'escuela_total_personal_docente');
  total_personal_docente.add( Validate.Presence );
  total_personal_docente.add( Validate.Numericality, { minimum: 1, onlyInteger: true } );
  var total_personal_alumn_m = new LiveValidation( 'escuela_alu_muj');
  total_personal_alumn_m.add( Validate.Presence );
  total_personal_alumn_m.add( Validate.Numericality, { minimum: 0, onlyInteger: true } );
  var total_personal_alumn_h = new LiveValidation( 'escuela_alu_hom');
  total_personal_alumn_h.add( Validate.Presence );
  total_personal_alumn_h.add( Validate.Numericality, { minimum: 0, onlyInteger: true } );
  var total_personal_admvo = new LiveValidation( 'escuela_total_personal_admvo');
  total_personal_admvo.add( Validate.Presence );
  total_personal_admvo.add( Validate.Numericality, { minimum: 0, onlyInteger: true } );
  var total_personal_apoyo = new LiveValidation( 'escuela_total_personal_apoyo');
  total_personal_apoyo.add( Validate.Presence );
  total_personal_apoyo.add( Validate.Numericality, { minimum: 0, onlyInteger: true } );

</script>