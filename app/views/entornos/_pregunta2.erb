<tr>
  <td align="justify">
    <label class="uper">2.- ¿Cuenta la escuela con algunos de los siguientes espacios?<em class="formee-req"> *</em></label>
  </td>
</tr>
<tr>
  <td align="justify" style="vertical-align:middle;" >
    <fieldset style="padding: 5px 5px 5px 5px;">
      <div id="espacios" class ="checkbox">
        <% Espacio.find(:all).each do |c| %>
          <% @valor = nil %>
          <%  @entorno.escuelas_espacios.each do |x| %>
            <% @valor = x.numero if x[:espacio_id] == c.id %>
          <% end %>
          <%= check_box_tag "espacios[#{c.id}]", c.clave, @s_espacios.include?(c.id) ? true : false, :onclick => "checkBoxTotextField(this, 'eje2_p2', 'entorno_no_espacios');" %>&nbsp;<%= c.descripcion %>&nbsp;CANTIDAD&nbsp;EN&nbsp;M&sup2;&nbsp;<input name="<%= c.clave %>" id="<%= c.clave %>" size="6px" type="others" style="text-align:center; font-size: 14px; display: none;" value="<%=h @valor ? @valor : "" %>" disabled /><br />
        <% end %>
      </div>
      <div class ="checkbox">
        <%= f.check_box :no_espacios, { :checked => @entorno.no_espacios == "NO" ? true : false, :onclick => "edMultiSelect('entorno_no_espacios', 'espacios', 'eje2_p2');" }, "NO", "SI" %>&nbsp;NO CUENTA CON ESPACIOS
      </div>
    </fieldset>
    <div id="eje2_p2" class="grid-12-12" style="display: none; text-align: center;">
      <%= link_to image_tag("era/btns_cert/upload.png", :mouseover => "era/btns_cert/upload1.png", :border => 0, :name => "pregunta2", :id => "pregunta2"),
                            {:controller => "upload", :diagnostico => @diagnostico, :eje => 2, :numero_pregunta => 2, :action => "list_evidencias" },
                             :title => "EVIDENCIA DE LA PREGUNTA 2", :class => "fancybox fancybox.iframe"%>
    </div>
  </td>
</tr>

<script type="text/javascript">
  edMultiSelect('entorno_no_espacios', 'espacios', 'eje2_p2');
  checkBoxTotextField('espacios', 'eje2_p2', 'entorno_no_espacios');

  jQuery(function(){
    jQuery("#espacios").validate({ expression: "if (skipSelectEspacios(SelfID, 'entorno_no_espacios')) return true; else return false;", message: "Seleccione una opción!" });
  });
</script>